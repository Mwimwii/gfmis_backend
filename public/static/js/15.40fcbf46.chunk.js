(this["webpackJsonpgfmis-react"]=this["webpackJsonpgfmis-react"]||[]).push([[15],{1410:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a(1395),c=a(501),r=a(93),o=a(3),s=a(9),d=a(7),l=a(15),b=a(12),u=a(552),p=a(527),j=a(523),m=a(526),O=a(525),g=a(570),v=a(614),f=a(322),h=a(506),x=a(208),y=a(66),I=a(1),T=a(604),S=a(133),C=a(611),k=a(593),w=a(204),F=a(31),M=a.n(F),R=a(2),B=Object(b.a)(T.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),L=function(){var e=Object(x.b)().enqueueSnackbar,t=Object(I.useState)({}),a=Object(l.a)(t,2),i=a[0],c=a[1],r=Object(I.useState)(!1),b=Object(l.a)(r,2),F=b[0],L=b[1];Object(C.a)(": Add School");var V=Object(w.b)(),G=Object(I.useState)({paddingTop:Object(S.d)()?"12px":"24px",paddingTopUnder:"12px",paddingTopUnderSelect:Object(S.d)()?"28px":"12px",paddingTopSelect:Object(S.d)()?"28px":"24px",marginTop:Object(S.d)()?0:4}),P=Object(l.a)(G,1)[0],D=Object(I.useRef)(null),E=Object(I.useState)(0),q=Object(l.a)(E,2),U=q[0],z=q[1];Object(I.useEffect)((function(){z(D.current.offsetWidth)}),[]);var A=function(){var t=Object(d.a)(Object(o.a)().mark((function t(a){var n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(Object(k.b)(Object(s.a)(Object(s.a)({},i),{},{province:i.provinceId,district:i.districtId})));case 2:(n=t.sent).message&&e(n.message,{variant:"error"}),L(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(e){var t=e.target.result;c(Object(s.a)(Object(s.a)({},i),{},{avatar:Object(S.a)(btoa(t))}))},W=function(e){e.persist&&e.persist(),c(Object(s.a)(Object(s.a)({},i),{},Object(n.a)({},e.target.name,e.target.value)))},H=i.name,J=i.emisId,$=i.districtId,K=i.provinceId,Q=Object(I.useState)([]),X=Object(l.a)(Q,2),Y=X[0],Z=X[1],_=Object(I.useState)([]),ee=Object(l.a)(_,2),te=ee[0],ae=ee[1];return Object(I.useEffect)((function(){0===Y.length&&(console.log("Fetching Provinces"),M.a.get("".concat("/","api/provinces")).then((function(e){var t=e.data.data;console.log(t),Z(t.map((function(e){return{label:e.attributes.name,value:e.id}})))})))}),[Y.length]),Object(I.useEffect)((function(){if(K){var e=encodeURI("?filters[province][id][$eq]=".concat(K));console.log(encodeURI(e));var t=localStorage.getItem("accessToken");fetch("".concat("/","api/districts").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){var t=e.data;console.log(t),ae(t.map((function(e){return{label:e.attributes.name,value:e.id}})))}))}}),[K]),Object(R.jsx)("div",{children:Object(R.jsxs)(T.ValidatorForm,{onSubmit:A,onError:function(){return null},children:[Object(R.jsx)(u.a,{}),Object(R.jsx)("h4",{style:{marginTop:"16px"},children:"Profile Image Upload"}),Object(R.jsx)(p.a,{container:!0,spacing:6,children:Object(R.jsx)(p.a,{item:!0,lg:12,md:12,sm:12,xs:12,sx:{mt:4,pt:0},style:{paddingTop:P.paddingTop},children:Object(R.jsx)("input",{type:"file",name:"profileImage",onChange:function(e){e.persist(),console.log(e.target);var t=e.target.files[0];if(t){console.log("File Exists");var a=new FileReader;console.log("File Reader initiated"),a.onload=N,console.log("File Reader loaded"),a.readAsBinaryString(t)}},style:{marginTop:"4px",marginBottom:"16px"}})})}),Object(R.jsx)(u.a,{style:{marginTop:"8px"}}),Object(R.jsx)("h4",{style:{marginTop:"16px"},children:"School Details"}),Object(R.jsxs)(p.a,{container:!0,spacing:6,children:[Object(R.jsx)(p.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:4,pt:0},style:{paddingTop:P.paddingTop},children:Object(R.jsx)(B,{type:"text",name:"name",label:"Name",onChange:W,value:H||"",validators:["required"],errorMessages:["this field is required"],InputLabelProps:{shrink:!0}})}),Object(R.jsx)(p.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:P.marginTop,pt:0},style:{paddingTop:P.paddingTop},children:Object(R.jsx)(B,{type:"text",name:"emisId",label:"EMIS ID",onChange:W,value:J||"",validators:["required"],errorMessages:["this field is required"],InputLabelProps:{shrink:!0}})})]}),Object(R.jsx)(u.a,{}),Object(R.jsx)("h4",{style:{marginTop:"16px"},children:"Location Details"}),Object(R.jsxs)(p.a,{container:!0,spacing:6,style:{marginBottom:"24px"},children:[Object(R.jsx)(p.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:4,pt:0},style:{paddingTop:P.paddingTop},children:Object(R.jsxs)(j.a,{fullWidth:!0,variant:"outlined",children:[Object(R.jsx)(m.a,{shrink:!0,ref:D,htmlFor:"province-select",style:{backgroundColor:"#FFF",paddingLeft:8,paddingRight:8},children:"Province"}),Object(R.jsx)(O.a,{labelId:"province-select",id:"mtx-province-select",name:"provinceId",value:K||"",label:"Province",disabled:0===Y.length,onChange:W,input:Object(R.jsx)(g.a,{notched:!0,labelwidth:U,name:"age",id:"province-select"}),children:Y&&Y.map((function(e){return Object(R.jsx)(v.a,{value:e.value,children:e.label},e.value)}))})]})}),Object(R.jsx)(p.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:P.marginTop,pt:0},style:{paddingTop:P.paddingTopSelect},children:Object(R.jsxs)(j.a,{fullWidth:!0,variant:"outlined",children:[Object(R.jsx)(m.a,{shrink:!0,ref:D,htmlFor:"district-select",style:{backgroundColor:"#FFF",paddingLeft:8,paddingRight:8},children:"District"}),Object(R.jsx)(O.a,{labelId:"district-select",id:"mtx-district-select",name:"districtId",value:$||"",label:"District",onChange:W,disabled:0===te.length,input:Object(R.jsx)(g.a,{notched:!0,labelwidth:U,name:"district",id:"district-select"}),children:te&&te.map((function(e){return Object(R.jsx)(v.a,{value:e.value,children:e.label},e.value)}))})]})})]}),Object(R.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",disabled:F,children:Object(R.jsx)(y.e,{sx:{textTransform:"capitalize"},children:F?Object(R.jsx)(h.a,{style:{margin:"auto",height:15,width:15,color:"white"}}):"Submit"})})]})})},V=Object(c.a)("div")((function(e){var t,a=e.theme;return t={margin:"30px"},Object(n.a)(t,a.breakpoints.down("sm"),{margin:"16px"}),Object(n.a)(t,"& .breadcrumb",Object(n.a)({marginBottom:"30px"},a.breakpoints.down("sm"),{marginBottom:"16px"})),t}));t.default=function(){return Object(R.jsx)(V,{children:Object(R.jsx)(i.a,{spacing:3,children:Object(R.jsx)(r.g,{title:"Add School",children:Object(R.jsx)(L,{})})})})}},587:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var n=a(49),i=a(53);function c(e){return Object(n.a)("MuiMenuItem",e)}var r=Object(i.a)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);t.a=r},593:function(e,t,a){"use strict";a(110);var n=a(111);a.d(t,"b",(function(){return n.e})),a.d(t,"e",(function(){return n.f}));var i=a(165);a.d(t,"a",(function(){return i.c})),a.d(t,"d",(function(){return i.d}));var c=a(202);a.d(t,"f",(function(){return c.b}));var r=a(164);a.d(t,"c",(function(){return r.d}));a(130)},598:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var n=a(49),i=a(53);function c(e){return Object(n.a)("MuiListItemText",e)}var r=Object(i.a)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.a=r},611:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1),i=function(e){Object(n.useEffect)((function(){document.title="GFMIS"+e}),[e])}},614:function(e,t,a){"use strict";var n=a(8),i=a(11),c=a(4),r=a(1),o=a(14),s=a(84),d=a(129),l=a(12),b=a(20),u=a(203),p=a(503),j=a(74),m=a(35),O=a(299),g=(a(49),a(53));var v=Object(g.a)("MuiListItemIcon",["root","alignItemsFlexStart"]),f=a(598),h=a(587),x=a(2),y=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],I=Object(l.a)(p.a,{shouldForwardProp:function(e){return Object(l.b)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((function(e){var t,a=e.theme,i=e.ownerState;return Object(c.a)({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!i.disableGutters&&{paddingLeft:16,paddingRight:16},i.divider&&{borderBottom:"1px solid ".concat((a.vars||a).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},Object(n.a)(t,"&.".concat(h.a.selected),Object(n.a)({backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):Object(d.a)(a.palette.primary.main,a.palette.action.selectedOpacity)},"&.".concat(h.a.focusVisible),{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):Object(d.a)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)})),Object(n.a)(t,"&.".concat(h.a.selected,":hover"),{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.hoverOpacity,"))"):Object(d.a)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):Object(d.a)(a.palette.primary.main,a.palette.action.selectedOpacity)}}),Object(n.a)(t,"&.".concat(h.a.focusVisible),{backgroundColor:(a.vars||a).palette.action.focus}),Object(n.a)(t,"&.".concat(h.a.disabled),{opacity:(a.vars||a).palette.action.disabledOpacity}),Object(n.a)(t,"& + .".concat(O.a.root),{marginTop:a.spacing(1),marginBottom:a.spacing(1)}),Object(n.a)(t,"& + .".concat(O.a.inset),{marginLeft:52}),Object(n.a)(t,"& .".concat(f.a.root),{marginTop:0,marginBottom:0}),Object(n.a)(t,"& .".concat(f.a.inset),{paddingLeft:36}),Object(n.a)(t,"& .".concat(v.root),{minWidth:36}),t),!i.dense&&Object(n.a)({},a.breakpoints.up("sm"),{minHeight:"auto"}),i.dense&&Object(c.a)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,Object(n.a)({},"& .".concat(v.root," svg"),{fontSize:"1.25rem"})))})),T=r.forwardRef((function(e,t){var a=Object(b.a)({props:e,name:"MuiMenuItem"}),n=a.autoFocus,d=void 0!==n&&n,l=a.component,p=void 0===l?"li":l,O=a.dense,g=void 0!==O&&O,v=a.divider,f=void 0!==v&&v,T=a.disableGutters,S=void 0!==T&&T,C=a.focusVisibleClassName,k=a.role,w=void 0===k?"menuitem":k,F=a.tabIndex,M=Object(i.a)(a,y),R=r.useContext(u.a),B={dense:g||R.dense||!1,disableGutters:S},L=r.useRef(null);Object(j.a)((function(){d&&L.current&&L.current.focus()}),[d]);var V,G=Object(c.a)({},a,{dense:B.dense,divider:f,disableGutters:S}),P=function(e){var t=e.disabled,a=e.dense,n=e.divider,i=e.disableGutters,r=e.selected,o=e.classes,d={root:["root",a&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",r&&"selected"]},l=Object(s.a)(d,h.b,o);return Object(c.a)({},o,l)}(a),D=Object(m.a)(L,t);return a.disabled||(V=void 0!==F?F:-1),Object(x.jsx)(u.a.Provider,{value:B,children:Object(x.jsx)(I,Object(c.a)({ref:D,role:w,tabIndex:V,component:p,focusVisibleClassName:Object(o.default)(P.focusVisible,C)},M,{ownerState:G,classes:P}))})}));t.a=T}}]);
//# sourceMappingURL=15.40fcbf46.chunk.js.map