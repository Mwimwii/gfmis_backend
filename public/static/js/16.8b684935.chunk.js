(this["webpackJsonpgfmis-react"]=this["webpackJsonpgfmis-react"]||[]).push([[16],{1408:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a(1395),r=a(501),s=a(93),o=a(9),c=a(15),l=a(12),d=a(552),b=a(527),p=a(1394),u=a(729),m=a(1401),j=a(523),g=a(526),O=a(525),h=a(570),x=a(614),v=a(322),f=a(506),y=a(208),T=a(66),C=a(1),I=a(604),k=a(133),S=a(611),M=a(110),w=a(204),F=a(30),L=a(50),q=a(205),P=a(31),B=a.n(P),R=a(2),N=Object(l.a)(I.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),U=function(){var e=Object(q.a)().user,t=Object(C.useState)({}),a=Object(c.a)(t,2),i=a[0],r=a[1],s=Object(C.useState)(!1),l=Object(c.a)(s,2),P=l[0],U=l[1],V=Object(y.b)().enqueueSnackbar;Object(S.a)(": Add User");var G=Object(w.b)(),D=Object(C.useState)({paddingTop:Object(k.d)()?"12px":"24px",paddingTopUnder:"12px",paddingTopUnderSelect:Object(k.d)()?"28px":"12px",marginTop:Object(k.d)()?0:4}),E=Object(c.a)(D,1)[0],A=Object(C.useRef)(null),H=Object(C.useState)(0),J=Object(c.a)(H,2),W=J[0],z=J[1];Object(C.useEffect)((function(){z(A.current.offsetWidth)}),[]);var Q=Object(F.f)(),K=function(e){var t=e.target.result;r(Object(o.a)(Object(o.a)({},i),{},{avatar:Object(k.a)(btoa(t))}))},X=function(e){e.persist&&e.persist(),r(Object(o.a)(Object(o.a)({},i),{},Object(n.a)({},e.target.name,e.target.value)))},Y=Object(C.useState)(L.a.sa.includes(e.role)?[{value:"3",label:"Super Admin"},{value:"1",label:"HQ"},{value:"2",label:"School Admin"},{value:"2",label:"Learner"}]:[{value:"2",label:"School Admin"},{value:"2",label:"Learner"}]),Z=Object(c.a)(Y,2),$=Z[0],_=Z[1],ee=i.username,te=i.firstName,ae=i.lastName,ne=i.email,ie=i.nrc,re=i.gender,se=i.role,oe=i.position,ce=i.mobile,le=i.dateOfBirth,de=i.password,be=i.schoolId,pe=Object(C.useState)([]),ue=Object(c.a)(pe,2),me=ue[0],je=ue[1],ge=Object(C.useState)([]),Oe=Object(c.a)(ge,2),he=Oe[0];Oe[1];return Object(C.useEffect)((function(){0===me.length&&B.a.get("".concat("/","api/schools")).then((function(e){var t=e.data.data.map((function(e){return{value:e.id,label:e.attributes.name}}));je(t)})),0===he.length&&B.a.get("".concat("/","api/users-permissions/roles")).then((function(e){var t=e.data.roles.map((function(e){return{value:e.id,label:e.name}}));_(t)}))}),[me.length]),Object(R.jsx)("div",{children:Object(R.jsxs)(I.ValidatorForm,{onSubmit:function(e){G(Object(M.e)(i)),setTimeout((function(){V("User sucessfully entered",{variant:"success"}),Q("/users"),U(!1)}),500)},onError:function(){return null},children:[Object(R.jsx)(d.a,{}),Object(R.jsx)("h4",{style:{marginTop:"16px"},children:"Profile Image Upload"}),Object(R.jsx)(b.a,{container:!0,spacing:6,children:Object(R.jsx)(b.a,{item:!0,lg:12,md:12,sm:12,xs:12,sx:{mt:4},style:{paddingTop:E.paddingTop},children:Object(R.jsx)("input",{type:"file",name:"profileImage",onChange:function(e){e.persist(),console.log(e.target);var t=e.target.files[0];if(t){console.log("File Exists");var a=new FileReader;console.log("File Reader initiated"),a.onload=K,console.log("File Reader loaded"),a.readAsBinaryString(t)}},style:{marginTop:"4px",marginBottom:"16px"}})})}),Object(R.jsx)(d.a,{}),Object(R.jsx)("h4",{style:{marginTop:"16px"},children:"Login Details"}),Object(R.jsxs)(b.a,{container:!0,spacing:6,children:[Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:4},style:{paddingTop:E.paddingTop},children:Object(R.jsx)(N,{type:"username",name:"username",label:"Username",value:ee||"",onChange:X,validators:["required"],errorMessages:["this field is required","username is not valid"],InputLabelProps:{shrink:!0}})}),Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:4},style:{paddingTop:E.paddingTop},children:Object(R.jsx)(N,{type:"email",name:"email",label:"Email",value:ne||"",onChange:X,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"],InputLabelProps:{shrink:!0}})}),Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:E.marginTop},style:{paddingTop:E.paddingTop},children:Object(R.jsx)(N,{name:"password",type:"password",label:"Password",value:de||"",onChange:X,validators:["required"],errorMessages:["this field is required"],InputLabelProps:{shrink:!0}})})]}),Object(R.jsx)(d.a,{style:{marginTop:"8px"}}),Object(R.jsx)("h4",{style:{marginTop:"16px"},children:"Personal Details"}),Object(R.jsxs)(b.a,{container:!0,spacing:6,children:[Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:4},style:{paddingTop:E.paddingTop},children:Object(R.jsx)(N,{type:"text",name:"firstName",label:"First Name",onChange:X,value:te||"",validators:["required"],errorMessages:["this field is required"],InputLabelProps:{shrink:!0}})}),Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:E.marginTop},style:{paddingTop:E.paddingTop},children:Object(R.jsx)(N,{type:"text",name:"lastName",label:"Last Name",onChange:X,value:ae||"",validators:["required"],errorMessages:["this field is required"],InputLabelProps:{shrink:!0}})}),Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:E.marginTop},style:{paddingTop:E.paddingTopUnder},children:Object(R.jsx)(N,{label:"Date of Birth",type:"date",name:"dateOfBirth",value:le,onChange:X,defaultValue:"2017-05-24",InputLabelProps:{shrink:!0}})}),Object(R.jsxs)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:E.marginTop},style:{paddingTop:E.paddingTopUnder},children:[Object(R.jsx)(N,{type:"number",name:"nrc",label:"National Registration Number",onChange:X,value:ie||"",validators:["required"],errorMessages:["this field is required"],InputLabelProps:{shrink:!0}}),Object(R.jsxs)(p.a,{row:!0,name:"gender",sx:{mb:2},value:re||"",onChange:X,children:[Object(R.jsx)(u.a,{value:"Male",label:"Male",labelPlacement:"end",control:Object(R.jsx)(m.a,{color:"primary"})}),Object(R.jsx)(u.a,{value:"Female",label:"Female",labelPlacement:"end",control:Object(R.jsx)(m.a,{color:"primary"})})]})]})]}),Object(R.jsx)(d.a,{}),Object(R.jsx)("h4",{style:{marginTop:"16px"},children:"Job Details"}),Object(R.jsxs)(b.a,{container:!0,spacing:6,children:[Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:4},style:{paddingTop:E.paddingTop},children:Object(R.jsx)(N,{type:"text",name:"position",label:"Job Position",onChange:X,value:oe||"",validators:["required"],errorMessages:["this field is required"],InputLabelProps:{shrink:!0}})}),Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:E.marginTop},style:{paddingTop:E.paddingTop},children:Object(R.jsxs)(j.a,{fullWidth:!0,variant:"outlined",children:[Object(R.jsx)(g.a,{shrink:!0,ref:A,htmlFor:"school-select",style:{backgroundColor:"#FFF",paddingLeft:8,paddingRight:8},children:"Insitution"}),Object(R.jsx)(O.a,{labelId:"school-select",id:"mtx-school-select",name:"schoolId",value:be||"",label:"School",disabled:0===me.length,onChange:X,input:Object(R.jsx)(h.a,{notched:!0,labelwidth:W,name:"school",id:"school-select"}),children:me&&me.map((function(e){return Object(R.jsx)(x.a,{value:e.value,children:e.label},e.value)}))})]})}),Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:E.marginTop},style:{paddingTop:E.paddingTopUnderSelect},children:Object(R.jsxs)(j.a,{fullWidth:!0,variant:"outlined",children:[Object(R.jsx)(g.a,{shrink:!0,ref:A,htmlFor:"role-select",style:{backgroundColor:"#FFF",paddingLeft:8,paddingRight:8},children:"Role"}),Object(R.jsx)(O.a,{labelId:"role-select",id:"mtx-role-select",name:"role",value:se||"",label:"Role",onChange:X,input:Object(R.jsx)(h.a,{notched:!0,labelwidth:W,name:"role",id:"role-select"}),children:$&&$.map((function(e){return Object(R.jsx)(x.a,{value:e.value,children:e.label},e.value)}))})]})})]}),Object(R.jsx)(d.a,{style:{marginTop:"24px"}}),Object(R.jsx)("h4",{style:{marginTop:"16px"},children:"Contact Details"}),Object(R.jsx)(b.a,{container:!0,spacing:6,style:{marginBottom:"24px"},children:Object(R.jsx)(b.a,{item:!0,lg:6,md:6,sm:12,xs:12,sx:{mt:4},style:{paddingTop:E.paddingTop},children:Object(R.jsx)(N,{type:"text",name:"mobile",value:ce||"",label:"Mobile Number",onChange:X,validators:["required"],errorMessages:["this field is required"]})})}),Object(R.jsx)(v.a,{color:"primary",variant:"contained",type:"submit",disabled:P,children:Object(R.jsx)(T.e,{sx:{textTransform:"capitalize"},children:P?Object(R.jsx)(f.a,{style:{margin:"auto",height:15,width:15,color:"white"}}):"Submit"})})]})})},V=Object(r.a)("div")((function(e){var t,a=e.theme;return t={margin:"30px"},Object(n.a)(t,a.breakpoints.down("sm"),{margin:"16px"}),Object(n.a)(t,"& .breadcrumb",Object(n.a)({marginBottom:"30px"},a.breakpoints.down("sm"),{marginBottom:"16px"})),t}));t.default=function(){return Object(R.jsx)(V,{children:Object(R.jsx)(i.a,{spacing:3,children:Object(R.jsx)(s.g,{title:"Add User",children:Object(R.jsx)(U,{})})})})}},587:function(e,t,a){"use strict";a.d(t,"b",(function(){return r}));var n=a(49),i=a(53);function r(e){return Object(n.a)("MuiMenuItem",e)}var s=Object(i.a)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);t.a=s},598:function(e,t,a){"use strict";a.d(t,"b",(function(){return r}));var n=a(49),i=a(53);function r(e){return Object(n.a)("MuiListItemText",e)}var s=Object(i.a)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.a=s},611:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1),i=function(e){Object(n.useEffect)((function(){document.title="GFMIS"+e}),[e])}},614:function(e,t,a){"use strict";var n=a(8),i=a(11),r=a(4),s=a(1),o=a(14),c=a(84),l=a(129),d=a(12),b=a(20),p=a(203),u=a(503),m=a(74),j=a(35),g=a(299),O=(a(49),a(53));var h=Object(O.a)("MuiListItemIcon",["root","alignItemsFlexStart"]),x=a(598),v=a(587),f=a(2),y=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],T=Object(d.a)(u.a,{shouldForwardProp:function(e){return Object(d.b)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((function(e){var t,a=e.theme,i=e.ownerState;return Object(r.a)({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!i.disableGutters&&{paddingLeft:16,paddingRight:16},i.divider&&{borderBottom:"1px solid ".concat((a.vars||a).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},Object(n.a)(t,"&.".concat(v.a.selected),Object(n.a)({backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):Object(l.a)(a.palette.primary.main,a.palette.action.selectedOpacity)},"&.".concat(v.a.focusVisible),{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):Object(l.a)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)})),Object(n.a)(t,"&.".concat(v.a.selected,":hover"),{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.hoverOpacity,"))"):Object(l.a)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):Object(l.a)(a.palette.primary.main,a.palette.action.selectedOpacity)}}),Object(n.a)(t,"&.".concat(v.a.focusVisible),{backgroundColor:(a.vars||a).palette.action.focus}),Object(n.a)(t,"&.".concat(v.a.disabled),{opacity:(a.vars||a).palette.action.disabledOpacity}),Object(n.a)(t,"& + .".concat(g.a.root),{marginTop:a.spacing(1),marginBottom:a.spacing(1)}),Object(n.a)(t,"& + .".concat(g.a.inset),{marginLeft:52}),Object(n.a)(t,"& .".concat(x.a.root),{marginTop:0,marginBottom:0}),Object(n.a)(t,"& .".concat(x.a.inset),{paddingLeft:36}),Object(n.a)(t,"& .".concat(h.root),{minWidth:36}),t),!i.dense&&Object(n.a)({},a.breakpoints.up("sm"),{minHeight:"auto"}),i.dense&&Object(r.a)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,Object(n.a)({},"& .".concat(h.root," svg"),{fontSize:"1.25rem"})))})),C=s.forwardRef((function(e,t){var a=Object(b.a)({props:e,name:"MuiMenuItem"}),n=a.autoFocus,l=void 0!==n&&n,d=a.component,u=void 0===d?"li":d,g=a.dense,O=void 0!==g&&g,h=a.divider,x=void 0!==h&&h,C=a.disableGutters,I=void 0!==C&&C,k=a.focusVisibleClassName,S=a.role,M=void 0===S?"menuitem":S,w=a.tabIndex,F=Object(i.a)(a,y),L=s.useContext(p.a),q={dense:O||L.dense||!1,disableGutters:I},P=s.useRef(null);Object(m.a)((function(){l&&P.current&&P.current.focus()}),[l]);var B,R=Object(r.a)({},a,{dense:q.dense,divider:x,disableGutters:I}),N=function(e){var t=e.disabled,a=e.dense,n=e.divider,i=e.disableGutters,s=e.selected,o=e.classes,l={root:["root",a&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",s&&"selected"]},d=Object(c.a)(l,v.b,o);return Object(r.a)({},o,d)}(a),U=Object(j.a)(P,t);return a.disabled||(B=void 0!==w?w:-1),Object(f.jsx)(p.a.Provider,{value:q,children:Object(f.jsx)(T,Object(r.a)({ref:U,role:M,tabIndex:B,component:u,focusVisibleClassName:Object(o.default)(N.focusVisible,k)},F,{ownerState:R,classes:N}))})}));t.a=C}}]);
//# sourceMappingURL=16.8b684935.chunk.js.map