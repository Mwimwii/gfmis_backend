(this["webpackJsonpgfmis-react"]=this["webpackJsonpgfmis-react"]||[]).push([[12],{1234:function(e,t,n){},1254:function(e,t){},1255:function(e,t){},1256:function(e,t){},1257:function(e,t){},1258:function(e,t){},1404:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n(501),o=n(15),i=n(1),r=n(322),s=n(527),d=n(617),u=n.n(d),l=n(30),b=n(593),j=n(204),f=n(9),O=n(31),p=n.n(O),m=n(567),x=n(820),h=n(1370),g=n(573),v=n(520),k=n(552),w=n(1373),S=n(822),C=n(521),y=n(208),D=n(842),F=n.n(D),R=n(561),B=(n(1234),n(506)),P=n(1396),I=n(1368),L=n(2);I.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(I.c.version,"/pdf.worker.min.js");var N=Object(i.forwardRef)((function(e,t){return Object(L.jsx)(R.a,Object(f.a)({direction:"up",ref:t},e))})),A=function(e){var t=e.bookId,n=Object(y.b)().enqueueSnackbar,c=Object(i.useState)(!1),a=Object(o.a)(c,2),s=a[0],d=a[1];return Object(L.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(){d(!0),p.a.get("/api/upload?id="+t).then((function(e){var t=e.data,c=new Blob([t.data],{type:"application/pdf"}),a=document.createElement("a");a.href=URL.createObjectURL(c),a.download="document.pdf",document.body.appendChild(a),a.click(),n("Downloading pdf",{variant:"success"})})).catch((function(e){return n("Download Failed. Check your connection.",{variant:"error"})})).finally((function(){d(!1)}))},disabled:s,startIcon:s?Object(L.jsx)(B.a,{size:20}):Object(L.jsx)(P.a,{}),children:"Download PDF"})},E=function(e){var t=e.open,n=e.handleClose,c=e.bookId,a=Object(i.useState)({}),r=Object(o.a)(a,2),s=r[0],d=r[1],u=Object(i.useState)(null),l=Object(o.a)(u,2),b=l[0],j=l[1],f=Object(i.useState)(1),O=Object(o.a)(f,2),y=O[0],D=O[1],R=Object(i.useState)("next"),B=Object(o.a)(R,2),P=B[0],E=B[1],J=Object(i.useState)([]),M=Object(o.a)(J,2),T=M[0],W=M[1],z=Object(i.useRef)(null);Object(i.useEffect)((function(){p.a.get("/api/upload?id="+c).then((function(e){var t=e.data;d(t)}))}),[c]);return Object(L.jsxs)(m.a,{fullScreen:!0,open:t,onClose:function(){P&&E("next"),y&&D(1),T&&W([]),b&&j(null),n()},TransitionComponent:N,children:[Object(L.jsx)(w.a,{sx:{position:"relative"},children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(C.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close",children:Object(L.jsx)(F.a,{})}),Object(L.jsx)(v.a,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Preview Book"})]})}),Object(L.jsxs)(g.a,{children:[(null===s||void 0===s?void 0:s.id)&&Object(L.jsxs)(h.a,{button:!0,children:[Object(L.jsx)(x.a,{primary:"Book Id",secondary:s.id}),Object(L.jsx)(A,{bookId:s.id})]}),Object(L.jsx)(k.a,{})]}),(null===s||void 0===s?void 0:s.data)&&Object(L.jsx)("div",{id:"ReaderContainer",children:Object(L.jsx)(I.a,{className:"PDFDocument",file:"data:application/pdf;base64,".concat(s.data),onLoadSuccess:function(e){var t=e.numPages;console.log("Bro... \ud83d\udc80"),j(t),W(Array.from({length:t},(function(e,t){return t+1}))),z.current&&console.log("OffsetWidth",z.current.offsetWidth)},children:T.map((function(e){return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(I.b,{className:"PDFPage PDFPageOne",renderMode:"canvas",pageNumber:e,renderTextLayer:!1,renderAnnotationLayer:!1,renderInteractiveForms:!1},e)})}))})})]})},J=n(50),M=n(205),T=function(e){return e.modules.moduleList},W=function(){var e=Object(M.a)().user,t=Object(i.useState)(!1),n=Object(o.a)(t,2),c=n[0],a=n[1],d=Object(i.useState)(""),f=Object(o.a)(d,2),O=f[0],p=f[1],m=Object(j.b)(),x=Object(j.c)(T),h=Object(i.useState)([]),g=Object(o.a)(h,2),v=g[0],k=g[1];Object(i.useEffect)((function(){v.length||x.length||m(Object(b.d)())}),[m]);var w=Object(l.f)(),S=[{name:"tite",label:"Title",options:{filter:!0}},{name:"category",label:"Category"},{name:"file",label:"File",options:{customBodyRender:function(e){return Object(L.jsx)(r.a,{onClick:function(){p(e),a(!0)},children:"View Book"})}}},{name:"description",label:"Description"}],C={rowsSelected:v,selectableRowsHideCheckboxes:!0,responsive:"simple",viewColumns:!0,Selection:!1,onRowClick:function(e){console.log(e)},onRowSelectionChange:function(e,t,n){k(n)}};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(E,{open:c,handleClose:function(){a(!1)},bookId:O}),Object(L.jsxs)(s.a,{container:!0,padding:2,rowSpacing:1.5,columnSpacing:2,children:[J.a.editor.includes(e.role)&&Object(L.jsx)(s.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(L.jsx)(r.a,{size:"large",variant:"contained",color:"primary",onClick:function(){w("/add-modules")},children:"Add Module"})}),Object(L.jsx)(s.a,{item:!0,padding:2,children:Object(L.jsx)(u.a,{title:"Modules",data:x.map((function(e){return[e.attributes.title,JSON.stringify(e.attributes.grades.data.map((function(e){return e.attributes.name}))),e.id,e.attributes.description]})),columns:S,options:C})})]})]})},z=Object(a.a)("div")((function(e){var t,n=e.theme;return t={margin:"30px"},Object(c.a)(t,n.breakpoints.down("sm"),{margin:"16px"}),Object(c.a)(t,"& .breadcrumb",Object(c.a)({marginBottom:"30px"},n.breakpoints.down("sm"),{marginBottom:"16px"})),t}));t.default=function(){return Object(L.jsx)(z,{children:Object(L.jsx)(W,{})})}},593:function(e,t,n){"use strict";n(110);var c=n(111);n.d(t,"b",(function(){return c.e})),n.d(t,"e",(function(){return c.f}));var a=n(165);n.d(t,"a",(function(){return a.c})),n.d(t,"d",(function(){return a.d}));var o=n(202);n.d(t,"f",(function(){return o.b}));var i=n(164);n.d(t,"c",(function(){return i.d}));n(130)},854:function(e,t){}}]);
//# sourceMappingURL=12.fca4f5f2.chunk.js.map